import{g as _,_ as x,c as r,a,F as h,r as u,h as F,o as i,b as m,w as c,t as o,i as P,e as v,d as p}from"./entry.70a9e48d.js";import{a as f}from"./axios.4a70c6fc.js";const y=_({id:"filter",state:()=>({name:"",status:""}),persist:!0,actions:{addValueToStore(e,t){this.name=e,this.status=t}}}),S={name:"index",data(){return{charData:[],firstPage:"https://rickandmortyapi.com/api/character/?page=1",nextPage:"",filterParams:{name:"",status:""},componentKey:0,filtersStore:y()}},beforeMount(){document.getElementById("inputFilter").value=this.filtersStore.name,document.getElementById("selectFilter").value=this.filtersStore.status,this.filterParams.name=this.filtersStore.name,this.filterParams.status=this.filtersStore.status,this.getFirstCharacters()},mounted(){this.getNextCharacters()},methods:{getFirstCharacters(){f.get(this.firstPage,{params:this.filterParams}).then(e=>{this.charData=e.data.results,this.nextPage=e.data.info.next}).catch(function(e){console.log(e.response),alert("Wrong filter")})},getNextCharacters(){window.onscroll=()=>{if(this.nextPage===null)return;document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&(f.get(this.nextPage,{params:this.filterParams}).then(t=>{this.charData=this.charData.concat(t.data.results),this.nextPage=t.data.info.next}).catch(function(t){console.log(t.response),alert("Wrong filter")}),this.forceRerender())}},forceRerender(){this.charCardsListKey+=1},setFilters(){this.nextPage=this.firstPage,this.filterParams.name=document.getElementById("inputFilter").value,this.filterParams.status=document.getElementById("selectFilter").value,this.filtersStore.addValueToStore(document.getElementById("inputFilter").value,document.getElementById("selectFilter").value),this.getFirstCharacters()}}},C={class:"charactersMain"},w={class:"charactersFilter"},B=F('<input id="inputFilter" class="inputFilter"><select id="selectFilter" class="selectFilter"><option value="" selected="selected">Any</option><option value="alive">Alive</option><option value="dead">Dead</option><option value="unknown">Unknown</option></select>',2),E={class:"charCardsList",key:"charCardsListKey"},k={class:"charCard"},I=["src"],N={class:"descriptionP"},b={class:"descriptionP"},D={class:"episodes"},V=a("p",{class:"descriptionP"},"Episodes:",-1);function L(e,t,T,W,$,g){const n=v;return i(),r("div",C,[a("div",w,[B,a("button",{class:"buttonFilter",onClick:t[0]||(t[0]=s=>g.setFilters())},"Search")]),a("div",E,[(i(!0),r(h,null,u(this==null?void 0:this.charData,s=>{var l;return i(),r("div",k,[m(n,{class:"charImg",to:"/character/"+s.id},{default:c(()=>[a("img",{class:"charImg",src:s.image},null,8,I)]),_:2},1032,["to"]),m(n,{class:"descriptionP",to:"/character/"+s.id},{default:c(()=>[p(o(s.name),1)]),_:2},1032,["to"]),a("p",N,o(s.species),1),a("p",b,o((l=s.location)==null?void 0:l.name),1),a("div",D,[V,(i(!0),r(h,null,u(s.episode.slice(0,5),d=>(i(),P(n,{class:"episodeNumbers",to:"/episode/"+d.slice(40)},{default:c(()=>[p(o(d.slice(40)),1)]),_:2},1032,["to"]))),256))])])}),256))])])}const H=x(S,[["render",L]]);export{H as default};
